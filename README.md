# WebArchiveViewer
**Исследователь веб-архива** – Настольное приложение на WPF'е, позволяющее просматривать и анализировать список ссылок на сохраненные в [веб-архиве](https://archive.org/web/) страницы интернет-сайтов. 

## Основные возможности
* Получение списка ссылок на сохраненные в архиве страницы указанного сайта.
* Просмотр списка ссылок, возможность фильтрации, сортировки и группировки
* Категоризация ссылок по настраиваемым правилам
* Сохранение списка ссылок в формате XML
* Загрузка HTML-кода страницы, контроль процесса загрузки

Для работы приложение использует [API веб-архива](https://github.com/internetarchive/wayback/tree/master/wayback-cdx-server).

## Запуск приложения
Требуется Windows 10 с .NET Framework не ниже 4.8.

Для установки необходимо распаковать архив в папку и запустить оттуда .exe файл приложения. Версии приложения присутствуют в [релизах](https://github.com/Alleaxx/WebArchiveViewer/releases/).



---
## Подробности
### Получение ссылок:
Производится с помощью запроса к серверу веб-архива. Для этого по правилам API веб-архива формируется строка ~ следующего вида.
```http://web.archive.org/cdx/search/cdx?url=http://ru-minecraft.ru/forum&matchType=prefix&output=json&from=20110727120000&to=20120727120000```

Приложение создает запрос автоматически на основе введенной информации. При необходимости текст запроса можно скопировать и вручную вставить куда нужно (в адресную строку браузера как правило).
![Настройки запроса](https://i.ibb.co/nBZf9Nx/image.png)

#### Коды и типы

Для фильтрации по кодам и типам следует ввести их через точку с запятой друг за другом, например:
``` text/html; !image/png```
Где ! используется для отрицания.
Используется условие И, так что единовременное задание кодов ответа 200 и 303 гарантирует 0 ссылок.

### Просмотр ссылок
Представляет постраничный вывод списка ссылок с основной информацией о каждой. Позволяет быстро перейти к архивной или актуальной версии страницы.
Отображаемые свойства ссылки:
* Номер в списке
* Дата фиксации страницы архивом
* Оригинальная ссылка
* Архивная ссылка
* Код ответа
* Тип ответа
* Категория (описана далее)
* Ссылка на HTML-файл (описана далее)

**Для списка есть следующие настройки отображения:**
* Количество отображаемых элементов на странице
* Фильтрация
    * По названию (ищет совпадения в оригинальном имени ссылки)
	* По дате
	    * С даты
		* По дату
	* По типу
	* По категории
* Сортировка (для всего списка)
	* По имени
	* Дате
* Группировка (для каждой страницы)
	* По имени
	* Дате

#### Имена страницы
Веб-архив не передает в ответе информацию о названии веб-страницы (<title></title>), однако это имя возможно загрузить вручную. После загрузки оно отображается в интерфейсе.
#### Категоризация
Категоризация ссылок происходит по редактируемым правилам, которые могут быть вложены друг в друга. 
Правило считается подходящим, если указанная строка присутствует в имени ссылки. Категорией ссылки выбирается имя первого наиболее "глубокого" подходящего правила.
![Категоризованные ссылки](https://i.ibb.co/V3HCfsR/image.png)
Список правил редактируется, по умолчанию существует лишь корневое правило, которое подходит для всех ссылок.

### Сохранение в файл
Список полученных ссылок можно сохранить в XML-файл для последующего использования его вместо обращения к серверу веб-архива.
Существует несколько различных вариантов сохранения ссылок
* Все адреса полученные с веб-архива
* Все ссылки, проходящие установленные фильтры
* Все ссылки, НЕ проходящие установленные фильтры

В этот файл также переносится информация об используемых правилах категоризации.

### Загрузка ссылок
Для загруженного снапшота можно указать папку для сохранения HTML-кода страниц, после чего начать его загрузку. С какой-то скоростью в папке будут появляться HTML-файлы, которые используются для дальнейших тёмных дел.

В программе есть контроль процесса загрузки в виде паузы-возобновления, а также скорости создания новых запросов.

Каждый загруженный файл попутно заполняет полное имя ссылки (эту возможность можно отключить). Пути к загруженным файлам с HTML-разметкой отображаются при просмотре ссылок.

Сам прогресс загрузки сохраняется в сохраняемом файле XML. При желании можно сбросить накопленный прогресс загрузки и начать заново. 

## В будущем
* Рефакторинг кода
* Оптимизация больших списков
* Отказоустойчивость
* Больше параметров для настройки просмотра
* Оптимизация вывода ссылок
	

